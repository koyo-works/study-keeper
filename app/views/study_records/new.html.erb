<h1>行動選択</h1>

<%= form_with model: @record, url: learning_path, local: true do |f| %>

  <div class="activities">
    <% @activities.each do |activity| %>
      <label class="activity-card">
        <%= f.radio_button :activity_id, activity.id, class: "activity-radio" %>
        <div class="card-content">
          <div class="icon"><%= activity.icon %></div>
          <div class="name"><%= activity.name %></div>
        </div>
      </label>
    <% end %>
  </div>

  <div class="record-form">
    <div class="memo-area">
      <%= f.text_area :memo, rows: 3, placeholder: "メモ（任意）" %>
    </div>

    <%= f.submit "記録する", class: "btn btn-primary submit-btn" %>
  </div>
<% end %>

<script>
document.querySelectorAll('.activity-radio').forEach(radio => {
  radio.addEventListener('click', function() {
    if (this.wasChecked) {
      this.checked = false; // 同じラジオをもう一度クリックしたら解除
    }
    this.wasChecked = this.checked;
  });
});
</script>